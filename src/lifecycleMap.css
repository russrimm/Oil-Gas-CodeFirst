.lifecycle-map.value-chain {
  --upstream-color:#2563eb;
  --midstream-color:#059669;
  --downstream-color:#d97706;
  --stage-bg: rgba(255,255,255,0.04);
  --stage-border: rgba(255,255,255,0.12);
  --chip-bg: rgba(255,255,255,0.08);
  position:relative;
  display:flex;
  flex-direction:column;
  gap:1.5rem;
  padding:1rem 0.25rem 0.5rem;
  font-size:14px;
}
.lifecycle-map .lm-chain { display:flex; gap:1rem; align-items:stretch; justify-content:space-between; }
.lifecycle-map .lm-stage { flex:1 1 0; background:var(--stage-bg); border:1px solid var(--stage-border); border-radius:14px; padding:0.85rem 1rem 1rem; position:relative; cursor:pointer; display:flex; flex-direction:column; -webkit-backdrop-filter:blur(4px); backdrop-filter:blur(4px); transition:background .3s, border-color .3s, transform .3s; }
.lifecycle-map .lm-stage:focus { outline:2px solid #fff; outline-offset:2px; }
.lifecycle-map .lm-stage:hover { background:rgba(255,255,255,0.08); }
.lifecycle-map .lm-stage.active { box-shadow:0 0 0 3px rgba(255,255,255,0.15); }
.lifecycle-map .stage-bar { position:absolute; top:0; left:0; height:4px; width:100%; border-radius:14px 14px 0 0; background:linear-gradient(90deg,var(--upstream-color),var(--midstream-color),var(--downstream-color)); opacity:0.9; }
.lifecycle-map .stage-head { display:flex; align-items:center; gap:.75rem; margin-bottom:.35rem; }
.lifecycle-map .stage-icon { width:42px; height:42px; display:flex; align-items:center; justify-content:center; border-radius:10px; background:linear-gradient(135deg,rgba(255,255,255,0.08),rgba(255,255,255,0.02)); color:var(--stage-accent, #fff); position:relative; }
.lifecycle-map .lm-stage[data-key='upstream'] { --stage-accent: var(--upstream-color); }
.lifecycle-map .lm-stage[data-key='midstream'] { --stage-accent: var(--midstream-color); }
.lifecycle-map .lm-stage[data-key='downstream'] { --stage-accent: var(--downstream-color); }
.lifecycle-map .stage-title { font-size:1.05rem; font-weight:600; margin:0; line-height:1.1; }
.lifecycle-map .stage-sub { font-size:.7rem; opacity:.75; letter-spacing:.5px; text-transform:uppercase; }
.lifecycle-map .stage-desc { font-size:.75rem; line-height:1.25rem; opacity:.9; margin:.1rem 0 .55rem; flex-grow:0; min-height:2.4rem; }
.lifecycle-map .stage-chips { list-style:none; display:flex; flex-wrap:wrap; gap:.4rem; margin:0; padding:0; }
.lifecycle-map .stage-chips li { background:var(--chip-bg); padding:.25rem .55rem; border-radius:999px; font-size:.65rem; letter-spacing:.5px; text-transform:uppercase; font-weight:500; border:1px solid rgba(255,255,255,0.1); }
.lifecycle-map .lm-pipeline { position:relative; height:34px; margin:-.3rem .5rem .35rem; }
.lifecycle-map .lm-pipeline .pipe { position:absolute; top:50%; left:0; height:12px; transform:translateY(-50%); width:100%; border-radius:6px; background:linear-gradient(90deg,rgba(37,99,235,0.4),rgba(5,150,105,0.4),rgba(217,119,6,0.4)); outline:1px solid rgba(255,255,255,0.08); }
.lifecycle-map .lm-flow-dot { position:absolute; top:50%; width:18px; height:18px; border-radius:50%; background:radial-gradient(circle at 30% 30%, #fff, var(--stage-accent, #60a5fa)); transform:translate(-50%, -50%); filter:blur(.3px); box-shadow:0 0 6px 2px rgba(255,255,255,0.4); }
.lifecycle-map .lm-flow-dot:nth-child(2){ --stage-accent: var(--upstream-color);} 
.lifecycle-map .lm-flow-dot:nth-child(3){ --stage-accent: var(--midstream-color);} 
.lifecycle-map .lm-flow-dot:nth-child(4){ --stage-accent: var(--downstream-color);} 
.lifecycle-map .lm-legend { display:flex; gap:1.2rem; font-size:.7rem; opacity:.85; padding:0 .75rem .25rem; flex-wrap:wrap; }
.lifecycle-map .lm-legend .sw { width:14px; height:14px; border-radius:4px; display:inline-block; margin-right:4px; vertical-align:middle; }
.lifecycle-map .lm-legend .sw.upstream { background:var(--upstream-color); }
.lifecycle-map .lm-legend .sw.midstream { background:var(--midstream-color); }
.lifecycle-map .lm-legend .sw.downstream { background:var(--downstream-color); }
.assembly-hint { margin-left:8px; font-size:11px; opacity:0.72; letter-spacing:.3px; }

@media (max-width: 980px) {
  .lifecycle-map .lm-chain { flex-direction:column; }
  .lifecycle-map .lm-pipeline { height:28px; }
  .lifecycle-map .lm-stage { padding:.9rem .9rem 1rem; }
  .lifecycle-map .stage-head { align-items:flex-start; }
}